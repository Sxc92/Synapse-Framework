# Synapse Framework æ€§èƒ½è°ƒä¼˜æŒ‡å—

## ğŸ“š æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›äº† Synapse Framework çš„æ€§èƒ½è°ƒä¼˜æŒ‡å—ï¼ŒåŒ…æ‹¬å„æ¨¡å—çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ã€å‚æ•°è°ƒä¼˜å»ºè®®ã€ç›‘æ§æŒ‡æ ‡ç­‰ã€‚é€šè¿‡åˆç†çš„æ€§èƒ½è°ƒä¼˜ï¼Œå¯ä»¥æ˜¾è‘—æå‡åº”ç”¨çš„å“åº”é€Ÿåº¦å’Œååé‡ã€‚

## ğŸ¯ æ€§èƒ½è°ƒä¼˜ç›®æ ‡

### æ ¸å¿ƒæŒ‡æ ‡
- **å“åº”æ—¶é—´**: é™ä½è¯·æ±‚å“åº”æ—¶é—´ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- **ååé‡**: æé«˜ç³»ç»Ÿå¤„ç†è¯·æ±‚çš„èƒ½åŠ›
- **èµ„æºåˆ©ç”¨ç‡**: ä¼˜åŒ–CPUã€å†…å­˜ã€ç½‘ç»œç­‰èµ„æºä½¿ç”¨
- **å¹¶å‘èƒ½åŠ›**: æå‡ç³»ç»Ÿå¹¶å‘å¤„ç†èƒ½åŠ›
- **ç¨³å®šæ€§**: ç¡®ä¿ç³»ç»Ÿåœ¨é«˜è´Ÿè½½ä¸‹çš„ç¨³å®šæ€§

### è°ƒä¼˜åŸåˆ™
- **æµ‹é‡ä¼˜å…ˆ**: å…ˆæµ‹é‡æ€§èƒ½ç“¶é¢ˆï¼Œå†é’ˆå¯¹æ€§ä¼˜åŒ–
- **æ¸è¿›ä¼˜åŒ–**: é€æ­¥ä¼˜åŒ–ï¼Œé¿å…è¿‡åº¦ä¼˜åŒ–
- **å¹³è¡¡è€ƒè™‘**: åœ¨æ€§èƒ½ã€ç¨³å®šæ€§ã€å¯ç»´æŠ¤æ€§é—´æ‰¾åˆ°å¹³è¡¡
- **æŒç»­ç›‘æ§**: å»ºç«‹æ€§èƒ½ç›‘æ§ä½“ç³»ï¼ŒæŒç»­è·Ÿè¸ªä¼˜åŒ–æ•ˆæœ

## ğŸ—ï¸ æ ¸å¿ƒæ¨¡å—æ€§èƒ½è°ƒä¼˜

### Synapse Core æ¨¡å—

#### é…ç½®ç®¡ç†ä¼˜åŒ–
- **é…ç½®ç¼“å­˜**: å¯ç”¨é…ç½®ç¼“å­˜ï¼Œå‡å°‘é…ç½®åŠ è½½å¼€é”€
- **é…ç½®çƒ­æ›´æ–°**: åˆç†è®¾ç½®é…ç½®åˆ·æ–°é—´éš”ï¼Œé¿å…é¢‘ç¹åˆ·æ–°
- **é…ç½®éªŒè¯**: ä½¿ç”¨å®½æ¾çš„éªŒè¯ç­–ç•¥ï¼Œå‡å°‘å¯åŠ¨æ—¶é—´

```yaml
synapse:
  core:
    configuration:
      # å¯ç”¨é…ç½®ç¼“å­˜
      enable-cache: true
      # é…ç½®åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰
      refresh-interval: 300
      # é…ç½®éªŒè¯ç­–ç•¥
      validation-strategy: LOOSE
```

#### å›½é™…åŒ–ä¼˜åŒ–
- **æ¶ˆæ¯ç¼“å­˜**: å¯ç”¨æ¶ˆæ¯ç¼“å­˜ï¼Œå‡å°‘æ–‡ä»¶IOæ“ä½œ
- **æ‡’åŠ è½½**: ä½¿ç”¨æ‡’åŠ è½½ç­–ç•¥ï¼ŒæŒ‰éœ€åŠ è½½è¯­è¨€åŒ…
- **å†…å­˜ä¼˜åŒ–**: é™åˆ¶ç¼“å­˜å¤§å°ï¼Œé¿å…å†…å­˜æ³„æ¼

```yaml
synapse:
  core:
    i18n:
      # æ¶ˆæ¯ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
      cache-seconds: 3600
      # æœ€å¤§ç¼“å­˜æ¡ç›®æ•°
      max-cache-entries: 1000
      # æ˜¯å¦å¯ç”¨æ‡’åŠ è½½
      lazy-loading: true
```

#### ä¸Šä¸‹æ–‡ç®¡ç†ä¼˜åŒ–
- **ä¸Šä¸‹æ–‡æ¸…ç†**: åŠæ—¶æ¸…ç†ä¸å†éœ€è¦çš„ä¸Šä¸‹æ–‡æ•°æ®
- **å†…å­˜ç›‘æ§**: ç›‘æ§ä¸Šä¸‹æ–‡å†…å­˜ä½¿ç”¨æƒ…å†µ
- **è¶…æ—¶è®¾ç½®**: è®¾ç½®åˆç†çš„ä¸Šä¸‹æ–‡è¶…æ—¶æ—¶é—´

```yaml
synapse:
  core:
    context:
      # ä¸Šä¸‹æ–‡è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      context-timeout: 30000
      # ä¸Šä¸‹æ–‡æ¸…ç†ç­–ç•¥
      cleanup-strategy: AUTO
      # å†…å­˜ç›‘æ§é—´éš”ï¼ˆç§’ï¼‰
      memory-monitor-interval: 60
```

## ğŸ—„ï¸ æ•°æ®æºæ¨¡å—æ€§èƒ½è°ƒä¼˜

### è¿æ¥æ± ä¼˜åŒ–

#### HikariCP ä¼˜åŒ–
```yaml
spring:
  datasource:
    hikari:
      # æœ€å°ç©ºé—²è¿æ¥æ•°
      minimum-idle: 10
      # æœ€å¤§è¿æ¥æ± å¤§å°
      maximum-pool-size: 50
      # è¿æ¥ç©ºé—²è¶…æ—¶æ—¶é—´
      idle-timeout: 300000
      # è¿æ¥æœ€å¤§ç”Ÿå‘½å‘¨æœŸ
      max-lifetime: 1800000
      # è¿æ¥è¶…æ—¶æ—¶é—´
      connection-timeout: 20000
      # è¿æ¥æµ‹è¯•æŸ¥è¯¢
      connection-test-query: "SELECT 1"
      # è¿æ¥æ³„æ¼æ£€æµ‹
      leak-detection-threshold: 60000
      # è¿æ¥æ± åç§°
      pool-name: "SynapseHikariCP"
```

#### Druid ä¼˜åŒ–
```yaml
spring:
  datasource:
    druid:
      # åˆå§‹è¿æ¥æ•°
      initial-size: 10
      # æœ€å°ç©ºé—²è¿æ¥æ•°
      min-idle: 10
      # æœ€å¤§æ´»è·ƒè¿æ¥æ•°
      max-active: 50
      # è·å–è¿æ¥æœ€å¤§ç­‰å¾…æ—¶é—´
      max-wait: 60000
      # ç©ºé—²è¿æ¥æ£€æµ‹é—´éš”
      time-between-eviction-runs-millis: 60000
      # è¿æ¥æœ€å°ç©ºé—²æ—¶é—´
      min-evictable-idle-time-millis: 300000
      # è¿æ¥éªŒè¯æŸ¥è¯¢
      validation-query: "SELECT 1"
      # ç”³è¯·è¿æ¥æ—¶æ£€æµ‹
      test-while-idle: true
      # ç”³è¯·è¿æ¥æ—¶æ‰§è¡ŒéªŒè¯
      test-on-borrow: false
      # å½’è¿˜è¿æ¥æ—¶æ‰§è¡ŒéªŒè¯
      test-on-return: false
```

### MyBatis-Plus ä¼˜åŒ–

#### å…¨å±€é…ç½®ä¼˜åŒ–
```yaml
synapse:
  datasource:
    mybatis-plus:
      configuration:
        # å¯ç”¨äºŒçº§ç¼“å­˜
        cache-enabled: true
        # å¯ç”¨å»¶è¿ŸåŠ è½½
        lazy-loading-enabled: true
        # ç§¯æå»¶è¿ŸåŠ è½½
        aggressive-lazy-loading: false
        # å¤šç»“æœé›†æ”¯æŒ
        multiple-result-sets-enabled: true
        # ä½¿ç”¨åˆ—æ ‡ç­¾
        use-column-label: true
        # ä½¿ç”¨ç”Ÿæˆçš„ä¸»é”®
        use-generated-keys: false
        # è‡ªåŠ¨æ˜ å°„è¡Œä¸º
        auto-mapping-behavior: PARTIAL
        # è‡ªåŠ¨æ˜ å°„æœªçŸ¥åˆ—
        auto-mapping-unknown-column-behavior: NONE
        # é»˜è®¤æ‰§è¡Œå™¨ç±»å‹
        default-executor-type: SIMPLE
        # é»˜è®¤è¯­å¥è¶…æ—¶æ—¶é—´
        default-statement-timeout: 25
        # é»˜è®¤è·å–ç»“æœé›†è¶…æ—¶æ—¶é—´
        default-fetch-size: 100
        # å®‰å…¨ç»“æœå¤„ç†
        safe-result-handler-enabled: true
        # å®‰å…¨è¡Œè¾¹ç•Œ
        safe-row-bounds-enabled: true
        # æ˜ å°„ä¸‹åˆ’çº¿åˆ°é©¼å³°
        map-underscore-to-camel-case: true
        # æœ¬åœ°ç¼“å­˜ä½œç”¨åŸŸ
        local-cache-scope: SESSION
        # è°ƒç”¨è®¾ç½®å™¨æ–¹æ³•
        call-setters-on-nulls: false
        # è¿”å›ç»“æœé›†
        return-instance-for-empty-row: false
```

#### åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–
- **åˆ†é¡µå¤§å°**: åˆç†è®¾ç½®åˆ†é¡µå¤§å°ï¼Œé¿å…å¤§ç»“æœé›†
- **ç´¢å¼•ä¼˜åŒ–**: ä¸ºåˆ†é¡µæŸ¥è¯¢å­—æ®µæ·»åŠ åˆé€‚çš„ç´¢å¼•
- **ç¼“å­˜ç­–ç•¥**: å¯¹åˆ†é¡µç»“æœè¿›è¡Œç¼“å­˜

```java
// åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–ç¤ºä¾‹
@GetMapping("/users")
public Result<PageResult<User>> getUsers(PageDTO pageDTO) {
    // é™åˆ¶åˆ†é¡µå¤§å°
    if (pageDTO.getSize() > 100) {
        pageDTO.setSize(100);
    }
    
    // ä½¿ç”¨ç¼“å­˜çš„åˆ†é¡µæŸ¥è¯¢
    String cacheKey = "users:page:" + pageDTO.getPage() + ":" + pageDTO.getSize();
    return cacheManager.getCache("userCache").get(cacheKey, () -> {
        return userService.getUsersByPage(pageDTO);
    });
}
```

### è¯»å†™åˆ†ç¦»ä¼˜åŒ–

#### è´Ÿè½½å‡è¡¡ç­–ç•¥
```yaml
synapse:
  datasource:
    read-write-split:
      # è´Ÿè½½å‡è¡¡ç­–ç•¥
      load-balance-strategy: WEIGHTED_ROUND_ROBIN
      # ä»åº“æƒé‡é…ç½®
      slave-weights:
        slave1: 1.0
        slave2: 1.5
        slave3: 0.8
      # æ•…éšœè½¬ç§»ç­–ç•¥
      failover-strategy: FAST_FAILOVER
      # å¥åº·æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
      health-check-interval: 30
      # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      connection-timeout: 5000
```

#### æ™ºèƒ½è·¯ç”±ä¼˜åŒ–
- **SQL åˆ†æ**: ä¼˜åŒ–SQLç±»å‹è¯†åˆ«ï¼Œæé«˜è·¯ç”±å‡†ç¡®æ€§
- **è¿æ¥æ± ç®¡ç†**: ä¸ºä¸åŒæ•°æ®æºé…ç½®ç‹¬ç«‹çš„è¿æ¥æ± 
- **æ•…éšœæ£€æµ‹**: å¿«é€Ÿæ£€æµ‹æ•°æ®æºæ•…éšœï¼ŒåŠæ—¶åˆ‡æ¢

## ğŸš€ ç¼“å­˜æ¨¡å—æ€§èƒ½è°ƒä¼˜

### Redis ç¼“å­˜ä¼˜åŒ–

#### è¿æ¥æ± ä¼˜åŒ–
```yaml
synapse:
  cache:
    redis:
      lettuce:
        pool:
          # æœ€å¤§æ´»è·ƒè¿æ¥æ•°
          max-active: 20
          # æœ€å¤§ç©ºé—²è¿æ¥æ•°
          max-idle: 10
          # æœ€å°ç©ºé—²è¿æ¥æ•°
          min-idle: 5
          # è·å–è¿æ¥æœ€å¤§ç­‰å¾…æ—¶é—´
          max-wait: 10000ms
          # ç©ºé—²è¿æ¥æ£€æµ‹é—´éš”
          time-between-eviction-runs: 30000ms
          # è¿æ¥æœ€å°ç©ºé—²æ—¶é—´
          min-evictable-idle-time: 300000ms
          # è¿æ¥éªŒè¯æŸ¥è¯¢
          validation-query: "PING"
          # ç”³è¯·è¿æ¥æ—¶æ£€æµ‹
          test-while-idle: true
          # ç”³è¯·è¿æ¥æ—¶æ‰§è¡ŒéªŒè¯
          test-on-borrow: false
          # å½’è¿˜è¿æ¥æ—¶æ‰§è¡ŒéªŒè¯
          test-on-return: false
```

#### åºåˆ—åŒ–ä¼˜åŒ–
```yaml
synapse:
  cache:
    redis:
      # åºåˆ—åŒ–å™¨ç±»å‹
      serializer: JACKSON
      # æ˜¯å¦å¯ç”¨å‹ç¼©
      compression: true
      # å‹ç¼©é˜ˆå€¼ï¼ˆå­—èŠ‚ï¼‰
      compression-threshold: 1024
      # å‹ç¼©ç®—æ³•
      compression-algorithm: GZIP
      # æ˜¯å¦å¯ç”¨å‹ç¼©ç¼“å­˜
      compression-cache: true
```

#### ç¼“å­˜ç­–ç•¥ä¼˜åŒ–
- **TTL ç­–ç•¥**: æ ¹æ®æ•°æ®è®¿é—®æ¨¡å¼è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´
- **ç¼“å­˜é¢„çƒ­**: ç³»ç»Ÿå¯åŠ¨æ—¶é¢„çƒ­çƒ­ç‚¹æ•°æ®
- **ç¼“å­˜æ›´æ–°**: ä½¿ç”¨åˆé€‚çš„ç¼“å­˜æ›´æ–°ç­–ç•¥

```yaml
synapse:
  cache:
    # ç¼“å­˜ç­–ç•¥é…ç½®
    strategy:
      # çƒ­ç‚¹æ•°æ®ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
      hot-data-ttl: 86400
      # æ™®é€šæ•°æ®ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
      normal-data-ttl: 3600
      # å†·æ•°æ®ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
      cold-data-ttl: 300
      # æ˜¯å¦å¯ç”¨ç¼“å­˜é¢„çƒ­
      enable-warmup: true
      # ç¼“å­˜é¢„çƒ­çº¿ç¨‹æ•°
      warmup-thread-count: 5
      # ç¼“å­˜æ›´æ–°ç­–ç•¥
      update-strategy: WRITE_THROUGH
```

### æœ¬åœ°ç¼“å­˜ä¼˜åŒ–

#### Caffeine ä¼˜åŒ–
```yaml
synapse:
  cache:
    caffeine:
      # æœ€å¤§ç¼“å­˜æ¡ç›®æ•°
      maximum-size: 10000
      # æœ€å¤§æƒé‡
      maximum-weight: 100000
      # å†™å…¥åè¿‡æœŸæ—¶é—´
      expire-after-write: 1h
      # è®¿é—®åè¿‡æœŸæ—¶é—´
      expire-after-access: 30m
      # æ˜¯å¦è®°å½•ç»Ÿè®¡ä¿¡æ¯
      record-stats: true
      # æ˜¯å¦å¯ç”¨å¼±å¼•ç”¨
      weak-keys: false
      # æ˜¯å¦å¯ç”¨å¼±å€¼å¼•ç”¨
      weak-values: false
      # æ˜¯å¦å¯ç”¨è½¯å¼•ç”¨
      soft-values: false
      # æ˜¯å¦å¯ç”¨é©±é€ç›‘å¬å™¨
      eviction-listener: true
```

#### ç¼“å­˜åˆ†å±‚ç­–ç•¥
- **L1 ç¼“å­˜**: æœ¬åœ°å†…å­˜ç¼“å­˜ï¼Œå­˜å‚¨çƒ­ç‚¹æ•°æ®
- **L2 ç¼“å­˜**: åˆ†å¸ƒå¼ç¼“å­˜ï¼Œå­˜å‚¨å…±äº«æ•°æ®
- **ç¼“å­˜ç©¿é€é˜²æŠ¤**: ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨é˜²æ­¢ç¼“å­˜ç©¿é€

### åˆ†å¸ƒå¼é”ä¼˜åŒ–

#### é”ç­–ç•¥ä¼˜åŒ–
```yaml
synapse:
  cache:
    distributed-lock:
      # é”è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      timeout: 30000
      # é‡è¯•æ¬¡æ•°
      retry-times: 3
      # é‡è¯•é—´éš”ï¼ˆæ¯«ç§’ï¼‰
      retry-interval: 1000
      # æ˜¯å¦å¯ç”¨çœ‹é—¨ç‹—æœºåˆ¶
      watchdog-enabled: true
      # çœ‹é—¨ç‹—é—´éš”ï¼ˆæ¯«ç§’ï¼‰
      watchdog-interval: 10000
      # é”é‡Šæ”¾ç­–ç•¥
      release-strategy: AUTO
      # æ˜¯å¦å¯ç”¨å…¬å¹³é”
      fair-lock: false
      # é”ç­‰å¾…é˜Ÿåˆ—å¤§å°
      wait-queue-size: 1000
```

## ğŸ“¡ äº‹ä»¶æ¨¡å—æ€§èƒ½è°ƒä¼˜

### å¼‚æ­¥å¤„ç†ä¼˜åŒ–

#### çº¿ç¨‹æ± ä¼˜åŒ–
```yaml
synapse:
  events:
    async:
      # æ ¸å¿ƒçº¿ç¨‹æ± å¤§å°
      core-pool-size: 10
      # æœ€å¤§çº¿ç¨‹æ± å¤§å°
      max-pool-size: 50
      # é˜Ÿåˆ—å®¹é‡
      queue-capacity: 500
      # çº¿ç¨‹ä¿æŒæ´»è·ƒæ—¶é—´ï¼ˆç§’ï¼‰
      keep-alive-seconds: 60
      # çº¿ç¨‹åå‰ç¼€
      thread-name-prefix: "event-async-"
      # æ˜¯å¦ç­‰å¾…ä»»åŠ¡å®Œæˆ
      wait-for-tasks-to-complete-on-shutdown: true
      # å…³é—­è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
      await-termination-seconds: 60
      # æ‹’ç»ç­–ç•¥
      rejection-policy: CALLER_RUNS
      # æ˜¯å¦å¯ç”¨çº¿ç¨‹æ± ç›‘æ§
      enable-monitoring: true
```

#### äº‹ä»¶å¤„ç†ä¼˜åŒ–
- **æ‰¹é‡å¤„ç†**: å¯¹åŒç±»äº‹ä»¶è¿›è¡Œæ‰¹é‡å¤„ç†
- **ä¼˜å…ˆçº§é˜Ÿåˆ—**: ä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—å¤„ç†é‡è¦äº‹ä»¶
- **äº‹ä»¶è¿‡æ»¤**: è¿‡æ»¤ä¸å¿…è¦çš„äº‹ä»¶ï¼Œå‡å°‘å¤„ç†å¼€é”€

```yaml
synapse:
  events:
    # äº‹ä»¶å¤„ç†é…ç½®
    processing:
      # æ˜¯å¦å¯ç”¨æ‰¹é‡å¤„ç†
      enable-batch-processing: true
      # æ‰¹é‡å¤§å°
      batch-size: 100
      # æ‰¹é‡å¤„ç†è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      batch-timeout: 5000
      # æ˜¯å¦å¯ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—
      enable-priority-queue: true
      # ä¼˜å…ˆçº§é˜Ÿåˆ—å¤§å°
      priority-queue-size: 1000
      # äº‹ä»¶è¿‡æ»¤ç­–ç•¥
      filter-strategy: SMART
      # æ˜¯å¦å¯ç”¨äº‹ä»¶å»é‡
      enable-deduplication: true
```

### äº‹ä»¶å­˜å‚¨ä¼˜åŒ–

#### å­˜å‚¨ç­–ç•¥ä¼˜åŒ–
```yaml
synapse:
  events:
    storage:
      # å­˜å‚¨ç±»å‹
      type: HYBRID
      # å†…å­˜å­˜å‚¨å¤§å°
      memory-size: 10000
      # æ•°æ®åº“å­˜å‚¨è¡¨å
      table-name: "sys_events"
      # æ˜¯å¦å¯ç”¨åˆ†åŒº
      enable-partitioning: true
      # åˆ†åŒºç­–ç•¥
      partition-strategy: TIME_BASED
      # åˆ†åŒºé—´éš”ï¼ˆå¤©ï¼‰
      partition-interval: 30
      # æ˜¯å¦å¯ç”¨å‹ç¼©
      enable-compression: true
      # å‹ç¼©ç®—æ³•
      compression-algorithm: GZIP
```

## ğŸ”’ å®‰å…¨æ¨¡å—æ€§èƒ½è°ƒä¼˜

### è®¤è¯ä¼˜åŒ–

#### Token ç®¡ç†ä¼˜åŒ–
```yaml
sa-token:
  # Token æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰
  timeout: 2592000
  # Token æœ€ä½æ´»è·ƒé¢‘ç‡ï¼ˆç§’ï¼‰
  active-timeout: -1
  # æ˜¯å¦å…è®¸åŒä¸€è´¦å·å¤šåœ°åŒæ—¶ç™»å½•
  is-concurrent: true
  # æ˜¯å¦å…±ç”¨ä¸€ä¸ª Token
  is-share: false
  # Token é£æ ¼
  token-style: uuid
  # æ˜¯å¦è¾“å‡ºæ“ä½œæ—¥å¿—
  is-log: true
  # æ˜¯å¦å¯ç”¨ Token ç¼“å­˜
  enable-token-cache: true
  # Token ç¼“å­˜å¤§å°
  token-cache-size: 10000
```

#### æƒé™éªŒè¯ä¼˜åŒ–
- **æƒé™ç¼“å­˜**: ç¼“å­˜ç”¨æˆ·æƒé™ä¿¡æ¯ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢
- **è§’è‰²ç»§æ‰¿**: ä¼˜åŒ–è§’è‰²ç»§æ‰¿å…³ç³»ï¼Œæé«˜æƒé™éªŒè¯æ•ˆç‡
- **æƒé™é¢„åŠ è½½**: ç”¨æˆ·ç™»å½•æ—¶é¢„åŠ è½½æƒé™ä¿¡æ¯

```yaml
synapse:
  security:
    permission:
      # æ˜¯å¦å¯ç”¨æƒé™ç¼“å­˜
      enable-cache: true
      # æƒé™ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
      permission-cache-time: 300
      # è§’è‰²ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
      role-cache-time: 600
      # æ˜¯å¦å¯ç”¨æƒé™é¢„åŠ è½½
      enable-preload: true
      # é¢„åŠ è½½ç­–ç•¥
      preload-strategy: LAZY
      # æƒé™éªŒè¯æ¨¡å¼
      validation-mode: CACHE_FIRST
```

### å®‰å…¨é˜²æŠ¤ä¼˜åŒ–

#### é˜²æŠ¤ç­–ç•¥ä¼˜åŒ–
```yaml
synapse:
  security:
    protection:
      # XSS é˜²æŠ¤
      xss:
        enabled: true
        filter-mode: ESCAPE
        # æ˜¯å¦å¯ç”¨ç™½åå•
        enable-whitelist: true
        # ç™½åå•è·¯å¾„
        whitelist-paths: "/api/public/**"
      
      # CSRF é˜²æŠ¤
      csrf:
        enabled: true
        # æ˜¯å¦å¯ç”¨Tokenç¼“å­˜
        enable-token-cache: true
        # Tokenç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
        token-cache-time: 300
      
      # è¯·æ±‚é™æµ
      rate-limiting:
        enabled: true
        # é™æµç®—æ³•
        algorithm: TOKEN_BUCKET
        # ä»¤ç‰Œæ¡¶å®¹é‡
        bucket-capacity: 1000
        # ä»¤ç‰Œç”Ÿæˆé€Ÿç‡
        token-generation-rate: 100
        # é™æµæ—¶é—´çª—å£ï¼ˆç§’ï¼‰
        time-window: 60
```

## ğŸ“Š æ€§èƒ½ç›‘æ§

### ç›‘æ§æŒ‡æ ‡

#### ç³»ç»ŸæŒ‡æ ‡
- **CPU ä½¿ç”¨ç‡**: ç›‘æ§CPUä½¿ç”¨æƒ…å†µ
- **å†…å­˜ä½¿ç”¨ç‡**: ç›‘æ§å†…å­˜ä½¿ç”¨å’ŒGCæƒ…å†µ
- **ç£ç›˜IO**: ç›‘æ§ç£ç›˜è¯»å†™æ€§èƒ½
- **ç½‘ç»œIO**: ç›‘æ§ç½‘ç»œä¼ è¾“æ€§èƒ½

#### åº”ç”¨æŒ‡æ ‡
- **å“åº”æ—¶é—´**: ç›‘æ§æ¥å£å“åº”æ—¶é—´
- **ååé‡**: ç›‘æ§ç³»ç»Ÿå¤„ç†èƒ½åŠ›
- **é”™è¯¯ç‡**: ç›‘æ§ç³»ç»Ÿé”™è¯¯æƒ…å†µ
- **å¹¶å‘æ•°**: ç›‘æ§ç³»ç»Ÿå¹¶å‘å¤„ç†èƒ½åŠ›

#### ä¸šåŠ¡æŒ‡æ ‡
- **ç¼“å­˜å‘½ä¸­ç‡**: ç›‘æ§ç¼“å­˜ä½¿ç”¨æ•ˆæœ
- **æ•°æ®åº“è¿æ¥æ•°**: ç›‘æ§æ•°æ®åº“è¿æ¥ä½¿ç”¨æƒ…å†µ
- **äº‹ä»¶å¤„ç†å»¶è¿Ÿ**: ç›‘æ§äº‹ä»¶å¤„ç†æ€§èƒ½
- **æƒé™éªŒè¯è€—æ—¶**: ç›‘æ§å®‰å…¨æ¨¡å—æ€§èƒ½

### ç›‘æ§å·¥å…·

#### åº”ç”¨ç›‘æ§
- **Spring Boot Actuator**: æä¾›åº”ç”¨å¥åº·æ£€æŸ¥å’ŒæŒ‡æ ‡ç›‘æ§
- **Micrometer**: æä¾›ç»Ÿä¸€çš„ç›‘æ§æŒ‡æ ‡æ”¶é›†
- **Prometheus**: æä¾›æ—¶åºæ•°æ®åº“å’ŒæŸ¥è¯¢è¯­è¨€
- **Grafana**: æä¾›ç›‘æ§æ•°æ®å¯è§†åŒ–

#### ç³»ç»Ÿç›‘æ§
- **JVM ç›‘æ§**: ç›‘æ§JVMå†…å­˜ã€GCã€çº¿ç¨‹ç­‰æŒ‡æ ‡
- **æ“ä½œç³»ç»Ÿç›‘æ§**: ç›‘æ§CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç­‰æŒ‡æ ‡
- **æ•°æ®åº“ç›‘æ§**: ç›‘æ§æ•°æ®åº“è¿æ¥ã€æŸ¥è¯¢ã€é”ç­‰æŒ‡æ ‡
- **ç¼“å­˜ç›‘æ§**: ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡ã€å†…å­˜ä½¿ç”¨ç­‰æŒ‡æ ‡

## ğŸ” æ€§èƒ½è°ƒä¼˜æµç¨‹

### 1. æ€§èƒ½åˆ†æ
- **æ€§èƒ½æµ‹è¯•**: è¿›è¡Œå‹åŠ›æµ‹è¯•å’Œè´Ÿè½½æµ‹è¯•
- **ç“¶é¢ˆè¯†åˆ«**: è¯†åˆ«ç³»ç»Ÿæ€§èƒ½ç“¶é¢ˆ
- **æ•°æ®æ”¶é›†**: æ”¶é›†æ€§èƒ½ç›‘æ§æ•°æ®
- **é—®é¢˜åˆ†æ**: åˆ†ææ€§èƒ½é—®é¢˜çš„æ ¹æœ¬åŸå› 

### 2. ä¼˜åŒ–å®æ–½
- **å‚æ•°è°ƒä¼˜**: è°ƒæ•´ç³»ç»Ÿé…ç½®å‚æ•°
- **ä»£ç ä¼˜åŒ–**: ä¼˜åŒ–å…³é”®ä»£ç è·¯å¾„
- **æ¶æ„ä¼˜åŒ–**: ä¼˜åŒ–ç³»ç»Ÿæ¶æ„è®¾è®¡
- **èµ„æºä¼˜åŒ–**: ä¼˜åŒ–èµ„æºä½¿ç”¨ç­–ç•¥

### 3. æ•ˆæœéªŒè¯
- **æ€§èƒ½æµ‹è¯•**: é‡æ–°è¿›è¡Œæ€§èƒ½æµ‹è¯•
- **æŒ‡æ ‡å¯¹æ¯”**: å¯¹æ¯”ä¼˜åŒ–å‰åçš„æ€§èƒ½æŒ‡æ ‡
- **ç¨³å®šæ€§éªŒè¯**: éªŒè¯ç³»ç»Ÿåœ¨ä¼˜åŒ–åçš„ç¨³å®šæ€§
- **æŒç»­ç›‘æ§**: å»ºç«‹æŒç»­çš„æ€§èƒ½ç›‘æ§æœºåˆ¶

## ğŸ“ æœ€ä½³å®è·µ

### æ€§èƒ½è°ƒä¼˜åŸåˆ™
- **æµ‹é‡ä¼˜å…ˆ**: å…ˆæµ‹é‡ï¼Œå†ä¼˜åŒ–
- **æ¸è¿›ä¼˜åŒ–**: é€æ­¥ä¼˜åŒ–ï¼Œé¿å…è¿‡åº¦ä¼˜åŒ–
- **å¹³è¡¡è€ƒè™‘**: åœ¨æ€§èƒ½ã€ç¨³å®šæ€§ã€å¯ç»´æŠ¤æ€§é—´æ‰¾åˆ°å¹³è¡¡
- **æŒç»­æ”¹è¿›**: å»ºç«‹æŒç»­çš„æ€§èƒ½æ”¹è¿›æœºåˆ¶

### å¸¸è§ä¼˜åŒ–ç­–ç•¥
- **ç¼“å­˜ä¼˜åŒ–**: åˆç†ä½¿ç”¨å¤šçº§ç¼“å­˜
- **å¼‚æ­¥å¤„ç†**: ä½¿ç”¨å¼‚æ­¥å¤„ç†æé«˜å“åº”é€Ÿåº¦
- **è¿æ¥æ± ä¼˜åŒ–**: ä¼˜åŒ–æ•°æ®åº“å’Œç¼“å­˜è¿æ¥æ± 
- **æ‰¹é‡æ“ä½œ**: ä½¿ç”¨æ‰¹é‡æ“ä½œå‡å°‘ç½‘ç»œå¼€é”€
- **ç´¢å¼•ä¼˜åŒ–**: ä¸ºæŸ¥è¯¢å­—æ®µæ·»åŠ åˆé€‚çš„ç´¢å¼•

### æ€§èƒ½è°ƒä¼˜æ£€æŸ¥æ¸…å•
- [ ] è¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼Œæ”¶é›†åŸºå‡†æ•°æ®
- [ ] è¯†åˆ«ç³»ç»Ÿæ€§èƒ½ç“¶é¢ˆ
- [ ] åˆ¶å®šæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ
- [ ] å®æ–½æ€§èƒ½ä¼˜åŒ–æªæ–½
- [ ] éªŒè¯ä¼˜åŒ–æ•ˆæœ
- [ ] å»ºç«‹æ€§èƒ½ç›‘æ§æœºåˆ¶
- [ ] æŒç»­è·Ÿè¸ªå’Œä¼˜åŒ–

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Synapse Framework æ¶æ„è®¾è®¡](ARCHITECTURE.md)
- [Synapse Framework ä½¿ç”¨æŒ‡å—](USAGE_GUIDE.md)
- [Synapse Framework é…ç½®å‚è€ƒ](CONFIGURATION_REFERENCE.md)
- [Synapse Framework API å‚è€ƒ](API_REFERENCE.md)

## ğŸ”— ç›¸å…³é“¾æ¥

- [Spring Boot æ€§èƒ½ä¼˜åŒ–](https://spring.io/projects/spring-boot)
- [JVM æ€§èƒ½è°ƒä¼˜æŒ‡å—](https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/)
- [Redis æ€§èƒ½ä¼˜åŒ–](https://redis.io/topics/optimization)
- [MySQL æ€§èƒ½ä¼˜åŒ–](https://dev.mysql.com/doc/refman/8.0/en/optimization.html)

---

*æœ€åæ›´æ–°æ—¶é—´ï¼š2025å¹´08æœˆ11æ—¥ 12:41:56* 